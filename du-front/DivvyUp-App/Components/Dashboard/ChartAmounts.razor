@using System.Globalization
@using DivvyUp_Shared.Dto
@using DivvyUp_Shared.Interface

<RadzenStack Style="width: 100%; height: 100%;" AlignItems="AlignItems.Start" JustifyContent="JustifyContent.Start" Orientation="Orientation.Horizontal">
    <RadzenChart Style="max-height: 110%; width: 50%;">
        <RadzenPieSeries Data="@ChartUnpaidAmount" Title="Aktualny bilans" CategoryProperty="@nameof(ChartDto.Name)" ValueProperty="@nameof(ChartDto.Value)">
            <RadzenSeriesDataLabels Visible="false" />
            <RadzenLegend Visible="false" />
            <RadzenValueAxis Formatter="@Format">
                <RadzenGridLines Visible="true" />
            </RadzenValueAxis>
        </RadzenPieSeries>
    </RadzenChart>
    <RadzenChart Style="max-height: 110%; width: 50%;">
        <RadzenPieSeries Data="@ChartTotalAmount" Title="Łączny wydatek" CategoryProperty="@nameof(ChartDto.Name)" ValueProperty="@nameof(ChartDto.Value)">
            <RadzenSeriesDataLabels Visible="false" />
            <RadzenLegend Visible="true" />
            <RadzenValueAxis Formatter="@Format">
                <RadzenGridLines Visible="true" />
            </RadzenValueAxis>
        </RadzenPieSeries>
    </RadzenChart>
</RadzenStack>





@code {
    [Inject]
    private IChartHttpService ChartService { get; set; }

    private List<ChartDto> ChartUnpaidAmount { get; set; }
    private List<ChartDto> ChartTotalAmount { get; set; }

    protected override async Task OnInitializedAsync()
    {
        ChartUnpaidAmount = await ChartService.GetUnpaindAmounts();
        ChartTotalAmount = await ChartService.GetTotalAmounts();
    }

    string Format(object value)
    {
        return ((double)value).ToString("C0", CultureInfo.CreateSpecificCulture("pl-PL"));
    }
}
